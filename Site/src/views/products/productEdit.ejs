<!DOCTYPE html>
<html lang="en">

    <%-include('../partials/head')%>
   
  <body class="add">

    <%-include('../partials/header')%>
    
    <main>
      <h3>Editar producto: <%= product.name.toUpperCase() %></h3>

      <div class="contenedor">

        <form action="/products/edit/<%= product.id %>?_method=PUT" id="productAdd" method="POST" enctype="multipart/form-data">

          <div class="carruselImages">
            
            
            <!-- /* ------------Carrusel--------------- */ -->
    <div class="carrusel">
      <!-- Container -->
<div class="slideshow-container fade">

  <!-- Imagenes y mensajes -->
  <div class="Containers">
    <div class="MessageInfo">
    <img src="/images/products/<%= product.images[0].file ? product.images[0].file : 'agregarImagen.png' %>">
  </div></div>
    
  <div class="Containers">
    <div class="MessageInfo">
    <img src="/images/products/<%= product.images[0].file ? product.images[0].file : 'agregarImagen.png' %>">   
  </div></div>

  <div class="Containers">
    <div class="MessageInfo">
    <img src="/images/products/<%= product.images[0].file ? product.images[0].file : 'agregarImagen.png' %>">   
  </div></div>

  <!-- Botones atrás y adelante -->
  <a class="Back" onclick="plusSlides(-1)">&#10094;</a>
  <a class="forward" onclick="plusSlides(1)">&#10095;</a>
</div>
<br>
  </div>
  <!--------------Fin del Carrusel----------------->

            <label for="image">
            <input class="image" type="file" id="image" name="image" multiple>
            <span id="error-image" class="error"><%= locals.errors && errors.image ? errors.image.msg : null %></span>
            <span id="info-image" class="errorVF"></span>
            </label>
                 

          <div class="container-input-total">
            <input type="text" placeholder="Nombre del producto" id="name" name="name" value="<%= firstLetter(product.name) %>"/>
            <span id="error-name" class="error"><%= locals.errors && errors.name ? errors.name.msg : null %></span>
            <span id="info-name" class="errorVF"></span>
          </div>

          <div class="container-input-total">
            <textarea placeholder="Descripcion" id="description" name="description"><%= product.description %></textarea>
            <label for="floatingTextarea"></label>
            <span id="error-description" class="error"><%= locals.errors && errors.description ? errors.description.msg : null %></span>
            <span id="info-description" class="errorVF"></span>
          </div>

          <div class="container-input-mitad">
            <input type="text" placeholder="Tamaño"  id="size" name="size" value=<%= firstLetter(product.size) %>>             
            <span id="error-size" class="error"><%= locals.errors && errors.size ? errors.size.msg : null %></span>
            <span id="info-size" class="errorVF"></span>

            <input type="number" placeholder="Precio"  id="price" name="price" value=<%= product.price %>>
            <span id="error-price" class="error"><%= locals.errors && errors.price ? errors.price.msg : null %></span>
            <span id="info-price" class="errorVF"></span>
          </div>  

              <div class="container-input-mitad">

                <select class="form-select" id="category" aria-label="Floating label select example" name="category">
                  <option value="" selected hidden>Selecciona la categoría</option>
                  <% categories.forEach(category => { %>
                    <option value="<%= category.id %>" <%= product.categoryId === category.id ? 'selected' : null%>><%= firstLetter(category.name) %></option>
                  <% }) %>
                </select>
                <label for="category"></label>    
                <span id="error-category" class="error"><%= locals.errors && errors.category ? errors.category.msg : null %></span>
                <span id="info-category" class="errorVF"></span>
              
                <select class="form-select" id="display" aria-label="Floating label select example" name="display">
                  <option value="" selected hidden>Selecciona el display</option>
                  <% displays.forEach(display => { %>
                    <option value="<%= display.id %>" <%= product.displayId === display.id ? 'selected' : null%>><%= firstLetter(display.name) %></option>
                  <% }) %>
                </select>
                <label for="display"></label> 
                <span id="error-display" class="error"><%= locals.errors && errors.display ? errors.display.msg : null %></span>  
                <span id="info-display" class="errorVF"></span>   
              </div>
          
          <button class="btn-add" type="submit">Guardar</button>

        </form>
      </div>
     
    </main>
    <%-include('../partials/footer') %>
    <!-- Javascript para el carrusel -->
    <%-include('../partials/scripts') %>    
    <script src="/javascripts/productsValidator.js"></script>
  </body>
</html>
